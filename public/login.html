<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Document</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    </head>

    <body>
        <div id="logoutDiv">
            <button type="button" onclick="logout()">Log out</button>
        </div>
        <div id="loginDiv">
            <form method="POST">
                Username:
                <input id="user" type="text" name="username" value="" /><br />
                Password:
                <input
                    id="pass"
                    type="text"
                    name="password"
                    value=""
                /><br /><br />
                <input type="submit" value="Login" onclick="login()" />
            </form>
        </div>
        <script>
            $(document).ready(function() {
                $("#logoutDiv").hide();
            });
            function login() {
                event.preventDefault();
                var username = $("#user").val();
                var password = $("#pass").val();
                $.post(
                    "http://localhost:8000/login",
                    { username: username, password: password },
                    function(result) {
                        // $("span").html(result);
                        if (result.id == 0) {
                            console.log("Fail");
                        } else {
                            console.log("Success");
                            $("#loginDiv").hide();
                            $("#logoutDiv").show();
                        }
                    }
                );
            }
            function logout() {
                event.preventDefault();
                // var id = $("#user").val();
                $.get(
                    "http://localhost:8000/logout",
                    { username: username },
                    function(result) {
                        if (result.success == false) {
                            console.log("Fail");
                        } else {
                            console.log("Success");
                            $("#logoutDiv").hide();
                            $("#loginDiv").show();
                        }
                    }
                );
            }
        </script>
    </body>
</html>
